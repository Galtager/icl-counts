sap.ui.define(["sap/ui/core/UIComponent","./BaseController"],function(t,n){function e(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const o=e(n);const i=o.extend("ICL.InventoryCount.controller.SingleCount",{onInit:function n(){o.prototype.onInit.call(this);const e=t.getRouterFor(this);e.getRoute("singleCount").attachMatched(this._initialFunc,this)},onAfterRendering:function t(){this.searchFieldExpand("countSF")},_initialFunc:function t(n){const e=this.getCountsModel();e.setProperty("/oMaintain/title",myComponent.i18n("countTitle"));this.arguments=n.getParameter("arguments");const o=e.getProperty("/oData/countItems");if(!o)this.loadCount(e)},loadCount:function t(n){const e=n.getProperty("/oMaintain/selCount");if(!e){this.fetchCount(n)}this.fetchItems(n)},fetchItems:function t(n){void fetch("/mockData/itemsInCounts.JSON").then(t=>t.json()).then(t=>{const e=t.filter(t=>t.countId===this.arguments.id);n.setProperty("/oData/countItems",e)})},fetchCount:function t(n){void fetch("/mockData/CountsList.JSON").then(t=>t.json()).then(t=>{const e=t.find(t=>t.id===this.arguments.id);n.setProperty("/oMaintain/selCount",e)})},toggleLongDesc:function t(n){const e=n.getSource().getBindingContext("CountsModel").getPath();this.toggleInfo(n,`${e}/collapse`)},onChangeAmount:function t(n){const e=n.getSource().getBindingContext("CountsModel").getPath();const o=this.getCountsModel();const i=n.getParameter("newValue");o.setProperty(`${e}/count`,i)},openItemDetails:async function t(n){const e=n.getSource().getBindingContext("CountsModel").getObject();const o=this.getCountsModel();const i=await this.fetchItemDetails(e.itemNum);o.setProperty("/oData/itemDetails",i);void this.onFragmentHandler(n,"Dialog_itemDetails",true)},fetchItemDetails:function t(n){return fetch("/mockData/itemDetails.JSON").then(t=>t.json()).then(t=>t.find(t=>t.itemNum===n))},openAttchment:function t(n){alert("open attachment")},openFooterScan:function t(n){this.onQRScanner(n)},onEndCountDialog:function t(n){const e=this.getCountsModel();const o=e.getProperty("/oData/countItems");const i=o.filter(t=>t.approve);e.setProperty("/oMaintain/countedItems",i);void this.onFragmentHandler(n,"Dialog_endCount",true)},onEndCountProccess:function t(){this.navTo("endCount")},approveItem:function t(n){const e=this.getCountsModel();const o=n.getSource().getBindingContext("CountsModel").getPath();e.setProperty(`${o}/approve`,true)},choosePersonalNumber:function t(n){const e=n.getSource().getBindingContext("CountsModel").getPath();const o=this.getCountsModel();o.setProperty("/oMaintain/selItemForPN",e);this.navTo("personalNumbers")}});return i});