{"version":3,"file":"EndCount.controller.js","names":["BaseController","EndCount","onInit","oRouter","UIComponent","getRouterFor","getRoute","attachMatched","_initialFunc","oEvent","countModel","getCountsModel","setProperty","myComponent","i18n","countedItems","getProperty","acceptCount","onFragmentHandler","cancelDlt","map","el","deleteState","toggleInfo","deleteitems","remainItems","filter"],"sources":["../../src/controller/EndCount.controller.ts"],"sourcesContent":["import UIComponent from \"sap/ui/core/UIComponent\";\r\nimport BaseController from \"./BaseController\";\r\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\r\nimport { ICount } from \"./Main.controller\";\r\nimport UI5Event from \"sap/ui/base/Event\";\r\nimport Button from \"sap/m/Button\";\r\nimport SearchField from \"sap/m/SearchField\";\r\nimport Link from \"sap/m/Link\";\r\nimport { IItemForCount } from \"./SingleCount.controller\";\r\n\r\n/**\r\n * @namespace ICL.InventoryCount.controller\r\n */\r\nexport default class EndCount extends BaseController {\r\n\r\n    onInit() {\r\n        super.onInit();\r\n        const oRouter = UIComponent.getRouterFor(this);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        oRouter.getRoute(\"endCount\").attachMatched(this._initialFunc, this);\r\n    }\r\n    private _initialFunc(oEvent: UI5Event) {\r\n        const countModel = this.getCountsModel();\r\n        countModel.setProperty('/oMaintain/title', myComponent.i18n('endCount'));\r\n        const countedItems = countModel.getProperty('/oMaintain/countedItems') as IItemForCount[]\r\n        // if (!countedItems) {\r\n        //     this.onNavBack()\r\n        // }\r\n    }\r\n    acceptCount(oEvent: UI5Event) {\r\n        void this.onFragmentHandler(oEvent, 'Dialog_Success', true)\r\n    }\r\n    cancelDlt(oEvent: UI5Event) {\r\n        const countModel = this.getCountsModel();\r\n        const countedItems = countModel.getProperty('/oMaintain/countedItems') as IItemForCount[]\r\n        countedItems.map(el => delete el.deleteState)\r\n        this.toggleInfo(oEvent, '/oFlags/endCountEdit')\r\n    }\r\n    deleteitems(oEvent: UI5Event) {\r\n        const countModel = this.getCountsModel();\r\n        const countedItems = countModel.getProperty('/oMaintain/countedItems') as IItemForCount[]\r\n        const remainItems = countedItems.filter(el => !el.deleteState)\r\n        countModel.setProperty('/oMaintain/countedItems', remainItems);\r\n        this.toggleInfo(oEvent, '/oFlags/endCountEdit')\r\n\r\n\r\n    }\r\n\r\n\r\n}"],"mappings":";;;;QACOA,cAAc;EASrB;AACA;AACA;EAFA,MAGqBC,QAAQ,GAASD,cAAc;IAEhDE,MAAM,qBAAG;MACL;MACA,MAAMC,OAAO,GAAGC,WAAW,CAACC,YAAY,CAAC,IAAI,CAAC;MAC9C;MACAF,OAAO,CAACG,QAAQ,CAAC,UAAU,CAAC,CAACC,aAAa,CAAC,IAAI,CAACC,YAAY,EAAE,IAAI,CAAC;IACvE,CAAC;IACOA,YAAY,wBAACC,MAAgB,EAAE;MACnC,MAAMC,UAAU,GAAG,IAAI,CAACC,cAAc,EAAE;MACxCD,UAAU,CAACE,WAAW,CAAC,kBAAkB,EAAEC,WAAW,CAACC,IAAI,CAAC,UAAU,CAAC,CAAC;MACxE,MAAMC,YAAY,GAAGL,UAAU,CAACM,WAAW,CAAC,yBAAyB,CAAoB;MACzF;MACA;MACA;IACJ,CAAC;IACDC,WAAW,wBAACR,MAAgB,EAAE;MAC1B,KAAK,IAAI,CAACS,iBAAiB,CAACT,MAAM,EAAE,gBAAgB,EAAE,IAAI,CAAC;IAC/D,CAAC;IACDU,SAAS,sBAACV,MAAgB,EAAE;MACxB,MAAMC,UAAU,GAAG,IAAI,CAACC,cAAc,EAAE;MACxC,MAAMI,YAAY,GAAGL,UAAU,CAACM,WAAW,CAAC,yBAAyB,CAAoB;MACzFD,YAAY,CAACK,GAAG,CAACC,EAAE,IAAI,OAAOA,EAAE,CAACC,WAAW,CAAC;MAC7C,IAAI,CAACC,UAAU,CAACd,MAAM,EAAE,sBAAsB,CAAC;IACnD,CAAC;IACDe,WAAW,wBAACf,MAAgB,EAAE;MAC1B,MAAMC,UAAU,GAAG,IAAI,CAACC,cAAc,EAAE;MACxC,MAAMI,YAAY,GAAGL,UAAU,CAACM,WAAW,CAAC,yBAAyB,CAAoB;MACzF,MAAMS,WAAW,GAAGV,YAAY,CAACW,MAAM,CAACL,EAAE,IAAI,CAACA,EAAE,CAACC,WAAW,CAAC;MAC9DZ,UAAU,CAACE,WAAW,CAAC,yBAAyB,EAAEa,WAAW,CAAC;MAC9D,IAAI,CAACF,UAAU,CAACd,MAAM,EAAE,sBAAsB,CAAC;IAGnD;EAAC;EAAA,OAjCgBR,QAAQ;AAAA"}