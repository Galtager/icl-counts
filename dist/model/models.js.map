{"version":3,"file":"models.js","names":["createDeviceModel","oModel","JSONModel","Device","setDefaultBindingMode","handleErrors","errorMes","err","MessageBox","error","JSON","stringify","e","console","log","QueryDataFromServer","filterParams","sService","sFunctionPath","sorters","expand","aFilters","Object","keys","map","key","Filter","FilterOperator","EQ","urlParameters","Promise","resolve","reject","myComponent","getOdataModel","read","filters","success","results","ReadDataFromServer","oKeysParams","metadataLoaded","then","sKey","createKey","data","CreateToServer","create","createJsonModel","oData","oMaintain","createCount","oFlags","createEmptyJsonModel"],"sources":["../../src/model/models.ts"],"sourcesContent":["import JSONModel from \"sap/ui/model/json/JSONModel\";\r\nimport Device from \"sap/ui/Device\";\r\nimport MessageBox from \"sap/m/MessageBox\";\r\nimport Filter from \"sap/ui/model/Filter\";\r\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\r\nimport Sorter from \"sap/ui/model/Sorter\";\r\n\r\nexport default {\r\n    createDeviceModel(): JSONModel {\r\n        //TODO|ui5ts: generate constructors\r\n        const oModel = new JSONModel(Device);\r\n        oModel.setDefaultBindingMode(\"OneWay\");\r\n        return oModel;\r\n    },\r\n    handleErrors(errorMes: unknown, err?: string): void {\r\n        try {\r\n            MessageBox.error(JSON.stringify(errorMes));\r\n        } catch (e) {\r\n            MessageBox.error(JSON.stringify(e));\r\n        }\r\n        if (err || errorMes)\r\n            console.log(err, errorMes);\r\n    },\r\n    QueryDataFromServer<T>(filterParams: Partial<T>, sService: string, sFunctionPath: string, sorters: Sorter[] = [], expand?: string): Promise<T[]> {\r\n        try {\r\n            const aFilters = Object.keys(filterParams).map((key) => {\r\n                return new Filter(key, FilterOperator.EQ, filterParams[key as keyof typeof filterParams])\r\n            })\r\n            let urlParameters = {};\r\n            if (expand) urlParameters = { \"$expand\": expand };\r\n            return new Promise(function (resolve, reject) {\r\n                myComponent.getOdataModel(sService).read(\"/\" + sFunctionPath, {\r\n                    filters: aFilters,\r\n                    sorters,\r\n                    urlParameters,\r\n                    success: ({ results }: { results: T[] }) => {\r\n                        resolve(results);\r\n                    },\r\n                    error: (error: unknown) => {\r\n                        reject(error);\r\n                    }\r\n                },);\r\n            });\r\n        } catch (err) { console.log(err) }\r\n    },\r\n    ReadDataFromServer<T>(oKeysParams: Partial<T>, sService: string, sFunctionPath: string): Promise<T> {\r\n        try {\r\n            return myComponent.getOdataModel(sService).metadataLoaded().then(function () {\r\n                const sKey = myComponent.getOdataModel(sService).createKey(\"/\" + sFunctionPath, oKeysParams);\r\n                return new Promise((resolve, reject) => {\r\n                    myComponent.getOdataModel(sService).read(sKey, {\r\n                        success: (data: T) => {\r\n                            resolve(data);\r\n                        },\r\n                        error: (error: unknown) => {\r\n                            reject(error);\r\n                        }\r\n                    });\r\n                });\r\n\r\n            })\r\n        } catch (err) { console.log(err) }\r\n    },\r\n    CreateToServer<T>(oKeysParams: Partial<T>, sService: string, sFunctionPath: string): Promise<T> {\r\n        try {\r\n            return new Promise((resolve, reject) => {\r\n                myComponent.getOdataModel(sService).create(\"/\" + sFunctionPath, oKeysParams, {\r\n                    success: (data: T) => {\r\n                        resolve(data);\r\n                    },\r\n                    error: (error: unknown) => {\r\n                        reject(error)\r\n                    }\r\n                });\r\n            });\r\n        } catch (err) { console.log(err) }\r\n    },\r\n    createJsonModel(): JSONModel {  // Local Model for maintain the app \r\n        const oData = {\r\n            oData: {\r\n            },\r\n            oMaintain: {\r\n                createCount: {}\r\n            },\r\n            oFlags: {\r\n            }\r\n        };\r\n        const oModel = new JSONModel(oData);\r\n        return oModel;\r\n    },\r\n    createEmptyJsonModel(): JSONModel {  // Local Model for maintain the app \r\n        const oData = {\r\n        };\r\n        const oModel = new JSONModel(oData);\r\n        return oModel;\r\n    },\r\n\r\n\r\n};\r\n"],"mappings":"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"}